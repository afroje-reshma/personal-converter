//@Library('pipelib@master') _
node { 
    
    stage('Setup')
    checkout scm
   
    stage("Build geopackage") {                                                               
      git url: "https://github.com/ngageoint/geopackage-java.git"                  
         withEnv(["PATH+MAVEN=${tool "M3"}/bin"]) {                                 
          sh "mvn clean install -DskipTests" 
          sh "pwd"
      }                                                                          
    }                                                                              
    
    stage("Build geopackage-wkb") {                                                
      git url: "https://github.com/venicegeo/geopackage-wkb-java.git"              
         withEnv(["PATH+MAVEN=${tool "M3"}/bin"]) {                                 
          sh "mvn clean package -DskipTests"
     }                                                                          
   }                                                                              
                                                                                   
    stage("Build geopackage-core") {                                               
      git url: "https://github.com/venicegeo/geopackage-core-java.git"             
        withEnv(["PATH+MAVEN=${tool "M3"}/bin"]) {                                 
         sh "mvn clean package"                                       
      }                                                                          
   }       

    
       
     // stage ("Nexus-Upload")
     // step([$class: "NexusArtifactUploader",
     // artifactId: "geopackage-core", classifier: "artifact",
     // credentialsId: "b9bc9cc5-871e-4738-88f3-9c3e5525a096",
     // file: "/var/lib/jenkins/workspace/converter/target/geopackage-core-1.2.2-SF-SNAPSHOT-javadoc.jar",
     //  groupId: "mil.nga.geopackage",
     //  nexusUrl: "52.34.149.187:8081/nexus", 
     //  nexusVersion: "NEXUS2", protocol: "http",
     // repository: "SNAPSHOT", type: "jar", version: "1.2.2"]) 
     
 
    
   
  
}

